{"version":3,"sources":["lib/polyfills.js","lib/api-client.js","lib/utils.js","components/canvas/Canvas.js","components/app/App.js","serviceWorker.js","index.js"],"names":["String","prototype","toProperCase","this","replace","txt","charAt","toUpperCase","substr","toLowerCase","_oldFetch","fetch","window","fetchStart","Event","view","document","bubbles","cancelable","fetchEnd","fetchCall","apply","arguments","dispatchEvent","then","catch","addEventListener","spinner","getElementById","classList","remove","add","cg2cy","data","typeMap","vertex","edge","fieldMap","_id","_from","_to","result","el","key","type","nodes","node","item","k","push","getHeaders","sessionID","show","nids","timestamp","options","a","url","URL","location","origin","search","URLSearchParams","Object","assign","method","body","JSON","stringify","undefined","headers","response","text","parse","list","_rawId","nid","init","addChildren","parentID","children","edit","generateSessionID","c","r","Math","random","toString","localStorage","setItem","getObjClass","length","Cytoscape","use","Popper","Cxtmenu","Canvas","props","state","elements","cy","configurePlugins","setHandlers","getItem","reset","setElements","minRadius","min","width","height","cxtMenu","menuRadius","selector","commands","buildMenu","bind","fillColor","activeFillColor","activePadding","indicatorSize","separatorWidth","spotlightPadding","minSpotlightRadius","maxSpotlightRadius","openMenuEvents","itemColor","itemTextShadowColor","atMouse","cxtmenu","menu","self","createElement","ReactDOM","render","content","outerHTML","select","poppers","id","popper","objClass","Body","entries","map","entry","field","value","popperCard","Card","CardBody","CardTitle","tag","className","style","minWidth","CardLink","href","onClick","destroy","CardText","bootstrap4","keyField","columns","dataField","hover","getElementsByTagName","appendChild","setAttribute","enabled","del","contentStyle","confirm","editNode","Form","FormGroup","row","Label","for","sm","size","Col","Input","name","defaultValue","required","bsSize","onChange","e","target","outgoers","d","filter","Class","sort","textFilter","selected","Set","selectRow","mode","clickToSelect","bgColor","onSelect","isSelect","addButton","contains","delete","onSelectAll","rows","clear","selectedData","has","condensed","filterFactory","setState","animate","$","layout","getOptions","run","on","evt","cursor","stars","planets","dwarf_planets","moons","comets","asteroids","log","parseFloat","scratch","fit","directed","padding","circle","grid","spacingFactor","avoidOverlap","nodeDimensionsIncludeLabels","maximal","animationDuration","animateFilter","transform","position","Row","Button","color","cyReset","outline","jsons","Type","$id","renderedPosition","viewportCenterX","viewportCenterY","relativeRenderedPosition","x","y","zoomFactor","panBy","duration","delay","zoom","level","PopperCore","stylesheet","CytoscapeComponent","normalizeElements","React","Component","App","toggle","isOpen","Container","fluid","Navbar","light","expand","NavbarBrand","role","NavbarToggler","Collapse","navbar","Nav","NavItem","NavLink","Boolean","hostname","match","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8672a243.chunk.js","sourcesContent":["// eslint-disable-next-line no-extend-native\nString.prototype.toProperCase = function() {\n  return this.replace(/\\w\\S*/g, function(txt) {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n};\n\n// Store a copy of the fetch function\nconst _oldFetch = fetch;\n\n// Create our new version of the fetch function\nwindow.fetch = function() {\n  // Create hooks\n  const fetchStart = new Event(\"fetchStart\", {\n    view: document,\n    bubbles: true,\n    cancelable: false\n  });\n  const fetchEnd = new Event(\"fetchEnd\", {\n    view: document,\n    bubbles: true,\n    cancelable: false\n  });\n\n  // Pass the supplied arguments to the real fetch function\n  const fetchCall = _oldFetch.apply(this, arguments);\n\n  // Trigger the fetchStart event\n  document.dispatchEvent(fetchStart);\n\n  fetchCall\n    .then(function() {\n      // Trigger the fetchEnd event\n      document.dispatchEvent(fetchEnd);\n    })\n    .catch(function() {\n      // Trigger the fetchEnd event\n      document.dispatchEvent(fetchEnd);\n    });\n\n  return fetchCall;\n};\n\ndocument.addEventListener(\"fetchStart\", function() {\n  const spinner = document.getElementById(\"loading\");\n  spinner.classList.remove(\"invisible\");\n  spinner.classList.add(\"visible\");\n});\n\ndocument.addEventListener(\"fetchEnd\", function() {\n  const spinner = document.getElementById(\"loading\");\n  spinner.classList.remove(\"visible\");\n  spinner.classList.add(\"invisible\");\n});\n","function cg2cy(data) {\n  const typeMap = {\n    vertex: \"nodes\",\n    edge: \"edges\"\n  };\n  const fieldMap = {\n    _id: \"id\",\n    _from: \"source\",\n    _to: \"target\"\n  };\n\n  const result = {};\n\n  for (let el of data) {\n    const key = typeMap[el.type];\n    result[key] = [];\n    for (let node of el.nodes) {\n      const item = {};\n      for (let k in node) {\n        // noinspection JSUnfilteredForInLoop\n        item[fieldMap[k] || k] = node[k];\n      }\n      result[key].push({ data: item });\n    }\n  }\n\n  return result;\n}\n\nfunction getHeaders(sessionID) {\n  return {\n    \"x-session-id\": sessionID,\n    \"Content-Type\": \"application/json\"\n  };\n}\n\nexport const show = async (sessionID, nids, timestamp, options) => {\n  const url = new URL(`${document.location.origin}/api/show`);\n  url.search = new URLSearchParams(\n    Object.assign(timestamp ? { timestamp } : {}, options)\n  );\n\n  const response = await fetch(url, {\n    method: \"POST\",\n    body: nids ? JSON.stringify(nids) : undefined,\n    headers: getHeaders(sessionID)\n  });\n  const data = JSON.parse(await response.text());\n\n  return cg2cy(data);\n};\n\nexport const list = async (sessionID, _rawId) => {\n  const url = new URL(`${document.location.origin}/api/list`);\n  url.search = new URLSearchParams({ _rawId });\n\n  const response = await fetch(url, {\n    method: \"GET\",\n    headers: getHeaders(sessionID)\n  });\n\n  return JSON.parse(await response.text());\n};\n\nexport const remove = async (sessionID, nid) => {\n  const url = new URL(`${document.location.origin}/api/remove`);\n  url.search = new URLSearchParams({ nid });\n\n  const response = await fetch(url, {\n    method: \"DELETE\",\n    headers: getHeaders(sessionID)\n  });\n\n  return response.text();\n};\n\nexport const init = async sessionID => {\n  const url = new URL(`${document.location.origin}/api/init`);\n\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: getHeaders(sessionID)\n  });\n\n  return response.text();\n};\n\nexport const addChildren = async (sessionID, parentID, children) => {\n  const url = new URL(`${document.location.origin}/api/add`);\n  url.search = new URLSearchParams({ parentID });\n\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: getHeaders(sessionID),\n    body: JSON.stringify(children)\n  });\n\n  return response.text();\n};\n\nexport const edit = async (sessionID, node) => {\n  const url = new URL(`${document.location.origin}/api/edit`);\n\n  const response = await fetch(url, {\n    method: \"PUT\",\n    headers: getHeaders(sessionID),\n    body: JSON.stringify(node)\n  });\n\n  return response.text();\n};\n","function uuidv4() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n    const r = (Math.random() * 16) | 0,\n      v = c === \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport const generateSessionID = () => {\n  const sessionID = uuidv4();\n  window.localStorage.setItem(\"sessionID\", sessionID);\n\n  return sessionID;\n};\n\nexport const escapeHtml = unsafe => {\n  return unsafe\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n};\n\nexport const getObjClass = data => {\n  return data[\"obj-class\"]\n    .substr(0, data[\"obj-class\"].length - 1)\n    .replace(/_/g, \" \")\n    .toProperCase();\n};\n","import Cytoscape from \"cytoscape\";\nimport Cxtmenu from \"cytoscape-cxtmenu\";\nimport Popper from \"cytoscape-popper\";\nimport PopperCore from \"popper.js\";\nimport React from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\nimport filterFactory, { textFilter } from \"react-bootstrap-table2-filter\";\nimport \"react-bootstrap-table2-filter/dist/react-bootstrap-table2-filter.min.css\";\nimport CytoscapeComponent from \"react-cytoscapejs\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Edit3,\n  Eye,\n  Plus,\n  Repeat,\n  RotateCcw,\n  Save,\n  Search,\n  Trash2,\n  X\n} from \"react-feather\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardLink,\n  CardText,\n  CardTitle,\n  Col,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n  Row\n} from \"reactstrap\";\nimport {\n  addChildren,\n  edit as editNode,\n  init,\n  list,\n  remove,\n  show\n} from \"../../lib/api-client\";\nimport { generateSessionID, getObjClass } from \"../../lib/utils\";\nimport \"./Canvas.css\";\nimport style from \"./style\";\n\nCytoscape.use(Popper);\nCytoscape.use(Cxtmenu);\n\nclass Canvas extends React.Component {\n  constructor(props = {}) {\n    super(props);\n\n    this.state = {\n      elements: []\n    };\n  }\n\n  async componentDidMount() {\n    window.cy = this.cy;\n\n    this.configurePlugins();\n    this.setHandlers();\n\n    let sessionID = window.localStorage.getItem(\"sessionID\");\n    if (!sessionID) {\n      await this.reset();\n    }\n\n    this.setElements();\n  }\n\n  reset() {\n    const sessionID = generateSessionID();\n    return init(sessionID);\n  }\n\n  configurePlugins() {\n    const cy = this.cy;\n    const minRadius = Math.min(cy.width(), cy.height()) / 8;\n    const cxtMenu = {\n      menuRadius: minRadius + 50, // the radius of the circular menu in pixels\n      selector: \"node\", // elements matching this Cytoscape.js selector will trigger cxtmenus\n      commands: this.buildMenu.bind(this), // function( ele ){ return [ /*...*/ ] }, // a function that returns\n      // commands or a promise of commands\n      fillColor: \"rgba(0, 0, 0, 0.75)\", // the background colour of the menu\n      activeFillColor: \"rgba(100, 100, 100, 0.5)\", // the colour used to indicate the selected command\n      activePadding: 10, // additional size in pixels for the active command\n      indicatorSize: 16, // the size in pixels of the pointer to the active command\n      separatorWidth: 3, // the empty spacing in pixels between successive commands\n      spotlightPadding: 4, // extra spacing in pixels between the element and the spotlight\n      minSpotlightRadius: minRadius - 40, // the minimum radius in pixels of the spotlight\n      maxSpotlightRadius: minRadius - 20, // the maximum radius in pixels of the spotlight\n      openMenuEvents: \"tap\", // space-separated cytoscape events that will open the menu; only\n      // `cxttapstart` and/or `taphold` work here\n      itemColor: \"white\", // the colour of text in the command's content\n      itemTextShadowColor: \"transparent\", // the text shadow colour of the command's content\n      // zIndex: 9999, // the z-index of the ui div\n      atMouse: false // draw menu at mouse position\n    };\n\n    this.cy.cxtmenu(cxtMenu);\n  }\n\n  buildMenu(node) {\n    const sessionID = window.localStorage.getItem(\"sessionID\");\n    const menu = [];\n    const self = this;\n\n    const view = document.createElement(\"span\");\n    ReactDOM.render(<Eye />, view);\n    menu.push({\n      fillColor: \"rgba(0, 0, 200, 0.75)\",\n      content: view.outerHTML,\n      select: function(el) {\n        window.poppers = window.poppers || {};\n        window.poppers[el.id()] = el.popper({\n          content: () => {\n            const data = Object.assign({}, el.data());\n            delete data.id;\n            delete data._rawId;\n            const objClass = getObjClass(data);\n            delete data[\"obj-class\"];\n            const body = data.Body;\n            delete data.Body;\n\n            const content = Object.entries(data).map(entry => ({\n              field: entry[0],\n              value: entry[1]\n            }));\n\n            const columns = [\n              {\n                dataField: \"field\",\n                text: \"Field\"\n              },\n              {\n                dataField: \"value\",\n                text: \"Value\"\n              }\n            ];\n\n            const popperCard = document.createElement(\"div\");\n            ReactDOM.render(\n              <Card>\n                <CardBody>\n                  <CardTitle\n                    tag=\"h5\"\n                    className=\"mw-100 mb-4\"\n                    style={{ minWidth: \"50vw\" }}\n                  >\n                    {body}&nbsp;\n                    <span>\n                      <small className=\"text-muted\">({objClass})</small>\n                    </span>\n                    <CardLink\n                      href=\"#\"\n                      className=\"btn btn-outline-dark float-right align-bottom\"\n                      onClick={() => {\n                        window.poppers[el.id()].destroy();\n                        document.getElementById(`popper-${el.id()}`).remove();\n                      }}\n                    >\n                      <X />\n                    </CardLink>\n                  </CardTitle>\n                  <CardText tag=\"div\">\n                    <BootstrapTable\n                      bootstrap4\n                      keyField=\"field\"\n                      data={content}\n                      columns={columns}\n                      hover\n                    />\n                  </CardText>\n                </CardBody>\n              </Card>,\n              popperCard\n            );\n\n            document.getElementsByTagName(\"body\")[0].appendChild(popperCard);\n            popperCard.setAttribute(\"id\", `popper-${el.id()}`);\n\n            return popperCard;\n          }\n        });\n      },\n      enabled: true\n    });\n\n    if (node.data()[\"obj-class\"] !== \"stars\") {\n      const del = document.createElement(\"span\");\n      ReactDOM.render(<Trash2 />, del);\n      menu.push({\n        fillColor: \"rgba(200, 0, 0, 0.75)\",\n        content: del.outerHTML,\n        contentStyle: {},\n        select: async function(el) {\n          const confirmed = window.confirm(\n            \"Are you sure? This will remove the selected node and ALL its descendants!\"\n          );\n          if (confirmed) {\n            await remove(sessionID, el.id());\n            self.setElements();\n          }\n        },\n        enabled: true\n      });\n    }\n\n    const edit = document.createElement(\"span\");\n    ReactDOM.render(<Edit3 />, edit);\n    menu.push({\n      fillColor: \"rgba(255, 165, 0, 0.75)\",\n      content: edit.outerHTML,\n      select: function(el) {\n        window.poppers = window.poppers || {};\n        window.poppers[el.id()] = el.popper({\n          content: () => {\n            const data = Object.assign({}, el.data());\n            delete data.id;\n            delete data._rawId;\n\n            const objClass = getObjClass(data);\n            delete data[\"obj-class\"];\n\n            const body = data.Body;\n            delete data.Body;\n\n            const content = Object.entries(data).map(entry => ({\n              field: entry[0],\n              value: entry[1]\n            }));\n\n            const popperCard = document.createElement(\"div\");\n            ReactDOM.render(\n              <Card>\n                <CardBody>\n                  <CardTitle\n                    tag=\"h5\"\n                    className=\"mw-100 mb-4\"\n                    style={{ minWidth: \"50vw\" }}\n                  >\n                    Edit {body}&nbsp;\n                    <span>\n                      <small className=\"text-muted\">({objClass})</small>\n                    </span>\n                    <CardLink\n                      href=\"#\"\n                      className=\"btn btn-outline-dark float-right align-bottom ml-1\"\n                      onClick={() => {\n                        window.poppers[el.id()].destroy();\n                        document.getElementById(`popper-${el.id()}`).remove();\n                      }}\n                    >\n                      <X />\n                    </CardLink>\n                    <CardLink\n                      href=\"#\"\n                      className=\"btn btn-primary float-right\"\n                      id=\"add\"\n                      onClick={async () => {\n                        const data = Object.assign({}, el.data());\n\n                        for (const c of content) {\n                          data[c.field] = c.value;\n                        }\n                        data._id = data.id;\n                        delete data.id;\n\n                        window.poppers[el.id()].destroy();\n                        document.getElementById(`popper-${el.id()}`).remove();\n\n                        await editNode(sessionID, data);\n                        self.setElements();\n                      }}\n                    >\n                      <Save /> Save\n                    </CardLink>\n                  </CardTitle>\n                  <CardText tag=\"div\">\n                    <Form>\n                      {content.map(c => (\n                        <FormGroup key={c.field} row>\n                          <Label for={`${el.id()}-${c.field}`} sm={4} size=\"sm\">\n                            {c.field}\n                          </Label>\n                          <Col sm={8}>\n                            <Input\n                              type=\"text\"\n                              name={c.field}\n                              id={`${el.id()}-${c.field}`}\n                              defaultValue={c.value}\n                              required={true}\n                              bsSize=\"sm\"\n                              onChange={e => {\n                                c.value = e.target.value;\n                              }}\n                            />\n                          </Col>\n                        </FormGroup>\n                      ))}\n                    </Form>\n                  </CardText>\n                </CardBody>\n              </Card>,\n              popperCard\n            );\n\n            document.getElementsByTagName(\"body\")[0].appendChild(popperCard);\n            popperCard.setAttribute(\"id\", `popper-${el.id()}`);\n\n            return popperCard;\n          }\n        });\n      },\n      enabled: true\n    });\n\n    const add = document.createElement(\"span\");\n    ReactDOM.render(<Plus />, add);\n    menu.push({\n      fillColor: \"rgba(0, 200, 0, 0.75)\",\n      content: add.outerHTML,\n      contentStyle: {},\n      select: async function(el) {\n        const children = el.outgoers(\"node\");\n        const data = (await list(sessionID, el.data()._rawId)).filter(\n          d => !children.filter(c => c.data()._rawId === d._rawId).length\n        );\n\n        for (let d of data) {\n          d.Class = getObjClass(d);\n        }\n\n        const columns = [\n          {\n            dataField: \"Body\",\n            text: \"Body\",\n            sort: true,\n            filter: textFilter()\n          },\n          {\n            dataField: \"Class\",\n            text: \"Class\",\n            sort: true,\n            filter: textFilter()\n          },\n          {\n            dataField: \"Type\",\n            text: \"Type\",\n            sort: true,\n            filter: textFilter()\n          }\n        ];\n\n        const selected = new Set();\n        const selectRow = {\n          mode: \"checkbox\",\n          clickToSelect: true,\n          bgColor: \"#00BFFF\",\n          onSelect: (row, isSelect) => {\n            const addButton = document.getElementById(\"add\");\n\n            if (isSelect) {\n              selected.add(row._rawId);\n              if (addButton.classList.contains(\"disabled\")) {\n                addButton.classList.remove(\"disabled\");\n              }\n            } else {\n              selected.delete(row._rawId);\n              if (!selected.size) {\n                addButton.classList.add(\"disabled\");\n              }\n            }\n          },\n          onSelectAll: (isSelect, rows) => {\n            const addButton = document.getElementById(\"add\");\n\n            if (isSelect) {\n              for (const row of rows) {\n                selected.add(row._rawId);\n                addButton.classList.remove(\"disabled\");\n              }\n            } else {\n              selected.clear();\n              addButton.classList.add(\"disabled\");\n            }\n          }\n        };\n\n        window.poppers = window.poppers || {};\n        window.poppers[el.id()] = el.popper({\n          content: () => {\n            const popperCard = document.createElement(\"div\");\n            ReactDOM.render(\n              <Card>\n                <CardBody>\n                  <CardTitle\n                    tag=\"h5\"\n                    className=\"mw-100 mb-4\"\n                    style={{ minWidth: \"50vw\" }}\n                  >\n                    Add Orbiting Body{\" \"}\n                    <small className=\"text-muted\">({el.data().Body})</small>\n                    <CardLink\n                      href=\"#\"\n                      className=\"btn btn-outline-dark float-right align-bottom ml-1\"\n                      onClick={() => {\n                        window.poppers[el.id()].destroy();\n                        document.getElementById(`popper-${el.id()}`).remove();\n                      }}\n                    >\n                      <X />\n                    </CardLink>\n                    <CardLink\n                      href=\"#\"\n                      className=\"btn btn-success disabled float-right\"\n                      id=\"add\"\n                      onClick={async () => {\n                        const selectedData = data.filter(d =>\n                          selected.has(d._rawId)\n                        );\n                        for (let s of selectedData) {\n                          delete s.Class;\n                        }\n\n                        window.poppers[el.id()].destroy();\n                        document.getElementById(`popper-${el.id()}`).remove();\n\n                        await addChildren(sessionID, el.id(), selectedData);\n                        self.setElements();\n                      }}\n                    >\n                      <Plus /> Add Selected\n                    </CardLink>\n                  </CardTitle>\n                  <CardText tag=\"div\" className=\"mw-100\">\n                    {data.length ? (\n                      <BootstrapTable\n                        bootstrap4\n                        keyField=\"_rawId\"\n                        data={data}\n                        columns={columns}\n                        hover\n                        condensed\n                        selectRow={selectRow}\n                        filter={filterFactory()}\n                      />\n                    ) : (\n                      <p>No Orbiters Found.</p>\n                    )}\n                  </CardText>\n                </CardBody>\n              </Card>,\n              popperCard\n            );\n\n            document.getElementsByTagName(\"body\")[0].appendChild(popperCard);\n            popperCard.setAttribute(\"id\", `popper-${el.id()}`);\n\n            return popperCard;\n          }\n        });\n      },\n      enabled: true\n    });\n\n    return menu;\n  }\n\n  async setElements() {\n    const sessionID = window.localStorage.getItem(\"sessionID\");\n    let data = await show(sessionID);\n    this.setState({\n      elements: data\n    });\n  }\n\n  cyReset() {\n    const cy = this.cy;\n    cy.reset();\n\n    const animate = cy.$(\"node\").length <= 50;\n    if (animate) {\n      cy.layout(this.getOptions(animate)).run();\n    }\n  }\n\n  setHandlers() {\n    const cy = this.cy;\n\n    cy.on(\"mouseover\", \"node\", function(evt) {\n      document.getElementById(\"cy\").style.cursor = \"pointer\";\n    });\n\n    cy.on(\"mouseout\", \"node\", function(evt) {\n      document.getElementById(\"cy\").style.cursor = \"default\";\n    });\n\n    cy.on(\"select mouseover\", \"edge\", e => {\n      e.target.style({\n        width: 4,\n        \"line-color\": \"#007bff\",\n        \"target-arrow-color\": \"#007bff\"\n      });\n    });\n\n    cy.on(\"unselect mouseout\", \"edge\", e => {\n      const edge = e.target;\n\n      if (!edge.selected()) {\n        edge.style({\n          width: 2,\n          \"line-color\": \"#ccc\",\n          \"target-arrow-color\": \"#ccc\"\n        });\n      }\n    });\n\n    cy.on(\"add\", \"node\", e => {\n      const node = e.target;\n      const styleMap = {\n        stars: \"#ffff00\",\n        planets: \"#f7a35c\",\n        dwarf_planets: \"#90ee7e\",\n        moons: \"#eeaaee\",\n        comets: \"#aaeeee\",\n        asteroids: \"#ff0066\"\n      };\n      node.style(\"background-color\", styleMap[node.data()[\"obj-class\"]]);\n\n      // noinspection JSNonASCIINames\n      const size =\n        Math.log(50 * (parseFloat(node.data()[\"Radius (R⊕)\"]) || 1)) * 10;\n      node.style(\"width\", `${size}px`);\n      node.style(\"height\", `${size}px`);\n\n      node.scratch(\"style\", node.style());\n    });\n\n    cy.on(\"mouseover select\", \"node\", e => {\n      e.target.style(\"background-color\", \"#007bff\");\n    });\n\n    cy.on(\"mouseout unselect\", \"node\", e => {\n      const node = e.target;\n\n      if (!node.selected()) {\n        node.style(\n          \"background-color\",\n          node.scratch(\"style\")[\"background-color\"]\n        );\n      }\n    });\n  }\n\n  getOptions(animate = true) {\n    return {\n      name: \"breadthfirst\",\n\n      fit: false, // whether to fit the viewport to the graph\n      directed: true, // whether the tree is directed downwards (or edges can point in any direction if false)\n      padding: 30, // padding on fit\n      circle: false, // put depths in concentric circles if true, put depths top down if false\n      grid: false, // whether to create an even grid into which the DAG is placed (circle:false only)\n      spacingFactor: 1.75, // positive spacing factor, larger => more space between nodes (N.B. n/a if causes overlap)\n      avoidOverlap: true, // prevents node overlap, may overflow boundingBox if not enough space\n      nodeDimensionsIncludeLabels: true, // Excludes the label when calculating node bounding boxes for the layout\n      // algorithm\n      maximal: true, // whether to shift nodes down their natural BFS depths in order to avoid upwards edges (DAGS\n      // only)\n      animate, // whether to transition the node positions\n      animationDuration: 500, // duration of animation in ms if enabled\n      animateFilter: function() {\n        return true;\n      }, // a function that determines whether the node should be animated.  All nodes animated by default on animate\n      // enabled.  Non-animated nodes are positioned immediately when the layout starts\n      transform: function(node, position) {\n        return position;\n      } // transform a given node position. Useful for changing flow direction in discrete layouts\n    };\n  }\n\n  render() {\n    const options = this.getOptions();\n\n    return (\n      <div>\n        <Row className=\"my-1\">\n          <Col>\n            <Button\n              className=\"float-right ml-1\"\n              color=\"danger\"\n              onClick={async () => {\n                const confirmed = window.confirm(\n                  \"Are you sure? You will lose all your changes and history!\"\n                );\n                if (confirmed) {\n                  await this.reset();\n                  this.cy.reset();\n                  this.setElements();\n                }\n              }}\n            >\n              <RotateCcw size={16} /> Reset\n            </Button>\n            <Button\n              className=\"float-right ml-1\"\n              color=\"primary\"\n              onClick={this.cyReset.bind(this)}\n            >\n              <Repeat size={16} /> Redraw\n            </Button>\n            <Button\n              className=\"float-right\"\n              outline\n              color=\"info\"\n              id=\"search\"\n              onClick={() => {\n                const data = this.cy\n                  .$(\"node\")\n                  .jsons()\n                  .map(node => {\n                    const d = node.data;\n\n                    return {\n                      Body: d.Body,\n                      Type: d.Type,\n                      Class: getObjClass(d),\n                      id: d.id\n                    };\n                  });\n                const columns = [\n                  {\n                    dataField: \"Body\",\n                    text: \"Body\",\n                    sort: true,\n                    filter: textFilter()\n                  },\n                  {\n                    dataField: \"Class\",\n                    text: \"Class\",\n                    sort: true,\n                    filter: textFilter()\n                  },\n                  {\n                    dataField: \"Type\",\n                    text: \"Type\",\n                    sort: true,\n                    filter: textFilter()\n                  }\n                ];\n\n                const selectRow = {\n                  mode: \"radio\",\n                  clickToSelect: true,\n                  bgColor: \"#00BFFF\",\n                  onSelect: row => {\n                    const cy = this.cy;\n                    const node = cy.$id(row.id);\n                    const renderedPosition = node.renderedPosition();\n                    const viewportCenterX = cy.width() / 2;\n                    const viewportCenterY = cy.height() / 2;\n                    const relativeRenderedPosition = {\n                      x: viewportCenterX - renderedPosition.x,\n                      y: viewportCenterY - renderedPosition.y\n                    };\n                    const zoomFactor =\n                      Math.min(\n                        viewportCenterX / node.width(),\n                        viewportCenterY / node.height()\n                      ) / 2;\n\n                    if (cy.$(\"node\").length <= 50) {\n                      cy.animate({\n                        panBy: relativeRenderedPosition,\n                        duration: 500\n                      }).delay(100, () => {\n                        cy.animate({\n                          zoom: {\n                            level: zoomFactor,\n                            renderedPosition: {\n                              x: viewportCenterX,\n                              y: viewportCenterY\n                            }\n                          },\n                          duration: 500\n                        });\n                      });\n                    } else {\n                      cy.panBy(relativeRenderedPosition);\n                      cy.zoom({\n                        level: zoomFactor,\n                        renderedPosition: {\n                          x: viewportCenterX,\n                          y: viewportCenterY\n                        }\n                      });\n                    }\n\n                    window.poppers[\"search\"].destroy();\n                    document.getElementById(\"popper-search\").remove();\n                  }\n                };\n\n                const search = document.createElement(\"div\");\n                ReactDOM.render(\n                  <Card>\n                    <CardBody>\n                      <CardTitle\n                        tag=\"h5\"\n                        className=\"mw-100 mb-4\"\n                        style={{ minWidth: \"50vw\" }}\n                      >\n                        Search{\" \"}\n                        <small className=\"text-muted\">(Jump to Body)</small>\n                        <CardLink\n                          href=\"#\"\n                          className=\"btn btn-outline-dark float-right align-bottom ml-1\"\n                          onClick={() => {\n                            window.poppers[\"search\"].destroy();\n                            document.getElementById(\"popper-search\").remove();\n                          }}\n                        >\n                          <X />\n                        </CardLink>\n                      </CardTitle>\n                      <CardText tag=\"div\" className=\"mw-100\">\n                        <BootstrapTable\n                          keyField=\"id\"\n                          data={data}\n                          hover\n                          condensed\n                          selectRow={selectRow}\n                          columns={columns}\n                          filter={filterFactory()}\n                        />\n                      </CardText>\n                    </CardBody>\n                  </Card>,\n                  search\n                );\n\n                document.getElementsByTagName(\"body\")[0].appendChild(search);\n                search.setAttribute(\"id\", \"popper-search\");\n                window.poppers = window.poppers || {};\n                window.poppers[\"search\"] = new PopperCore(\n                  document.getElementById(\"search\"),\n                  search\n                );\n              }}\n            >\n              <Search size={16} /> Search\n            </Button>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            <div\n              className=\"border border-secondary rounded w-100\"\n              id=\"cy-container\"\n            >\n              <div className=\"m-1\" id=\"cy\">\n                <CytoscapeComponent\n                  cy={cy => {\n                    this.cy = cy;\n                  }}\n                  style={{ width: \"100%\", height: \"100%\" }}\n                  stylesheet={style}\n                  layout={options}\n                  elements={CytoscapeComponent.normalizeElements(\n                    this.state.elements\n                  )}\n                />\n              </div>\n            </div>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Canvas;\n","import React, { Component } from \"react\";\nimport { GitHub } from \"react-feather\";\nimport {\n  Col,\n  Collapse,\n  Container,\n  Nav,\n  Navbar,\n  NavbarBrand,\n  NavbarToggler,\n  NavItem,\n  NavLink,\n  Row\n} from \"reactstrap\";\nimport Canvas from \"../canvas/Canvas\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = this.toggle.bind(this);\n    this.state = {\n      isOpen: false\n    };\n  }\n\n  toggle() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  }\n\n  render() {\n    return (\n      <Container fluid>\n        <Navbar\n          color=\"inverse\"\n          light\n          expand=\"md\"\n          className=\"border-bottom mb-2\"\n        >\n          <NavbarBrand href=\"/\" className=\"text-wrap\">\n            CivicGraph Demo - A DIY Solar System\n            <span\n              className=\"spinner-grow mx-2 text-danger invisible\"\n              role=\"status\"\n              id=\"loading\"\n            >\n              <span className=\"sr-only\">Loading...</span>\n            </span>\n          </NavbarBrand>\n          <NavbarToggler onClick={this.toggle} />\n          <Collapse isOpen={this.state.isOpen} navbar>\n            <Nav className=\"ml-auto\" navbar>\n              <NavItem>\n                <NavLink\n                  href=\"https://github.com/adityamukho/CivicGraph\"\n                  target=\"_blank\"\n                >\n                  <GitHub />\n                </NavLink>\n              </NavItem>\n            </Nav>\n          </Collapse>\n        </Navbar>\n        <Container fluid>\n          <Row>\n            <Col>\n              <Canvas />\n            </Col>\n          </Row>\n        </Container>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/app/App\";\nimport \"./index.css\";\nimport \"./lib/polyfills\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}