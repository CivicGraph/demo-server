(window["webpackJsonpdemo-react"]=window["webpackJsonpdemo-react"]||[]).push([[0],{28:function(e){e.exports=JSON.parse('[{"selector":"node.data","style":{"text-valign":"center","text-halign":"left","width":"60px","height":"60px"}},{"selector":"node.data[Body]","style":{"label":"data(Body)"}},{"selector":"node.data[!Body]","style":{"label":"data(id)"}},{"selector":"node[obj-class = \'stars\']","style":{"background-color":"#eeaaee"}},{"selector":"node[obj-class = \'planets\']","style":{"background-color":"#f7a35c"}},{"selector":"node[obj-class = \'dwarf_planets\']","style":{"background-color":"#90ee7e"}},{"selector":"node[obj-class = \'moons\']","style":{"background-color":"#7798BF"}},{"selector":"node[obj-class = \'comets\']","style":{"background-color":"#aaeeee"}},{"selector":"node[obj-class = \'asteroids\']","style":{"background-color":"#ff0066"}},{"selector":"node:selected","style":{"background-color":"#007bff"}},{"selector":"edge","style":{"width":2,"line-color":"#ccc","text-rotation":"autorotate","text-margin-y":"-10px","curve-style":"bezier","target-arrow-color":"#ccc","target-arrow-shape":"vee"}},{"selector":".eh-handle","style":{"background-color":"red","width":20,"height":20,"shape":"diamond","overlay-opacity":0,"border-width":12,"border-opacity":0}},{"selector":".eh-source","style":{"border-width":2,"border-color":"red"}},{"selector":".eh-target","style":{"border-width":2,"border-color":"red"}},{"selector":".eh-preview, .eh-ghost-edge","style":{"line-color":"red","target-arrow-color":"red","source-arrow-color":"red"}},{"selector":".eh-ghost-edge.eh-preview-active","style":{"opacity":0}}]')},32:function(e,t,a){e.exports=a(59)},50:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);a(33);var n=a(1),r=a.n(n),o=a(7),c=a.n(o),l=a(11),s=a(12),i=a(14),d=a(13),u=a(6),h=a(15),f=a(69),g=a(70),m=a(71),y=a(72),v=a(76),p=a(73),b=a(74),w=a(75),E=a(64),k=a(65),j=a(17),x=a.n(j),O=a(23),C=a(10),S=a.n(C),N=a(24),D=a.n(N),B=a(25),M=a.n(B),P=a(26),_=a.n(P),L=a(27),T=a.n(L),I=a(61),R=a(62),$=a(63),z=a(67),F=a(68),H=a(66),J=function(e,t,a){var n=new URL("".concat(document.location.origin,"/api/show"));return n.search=new URLSearchParams(Object.assign(t?{timestamp:t}:{},a)),fetch(n,{method:"POST",body:JSON.stringify({path:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return console.log(e.blob()),e.blob()}))},A=(a(50),a(28));S.a.use(_.a),S.a.use(D.a),S.a.use(M.a);var G=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l.a)(this,t),e=Object(i.a)(this,Object(d.a)(t).call(this,a)),window.datacy=e.datacy=S()({headless:!0}),e.state={elements:[]},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.cy=this.cy,this.configurePlugins(),e.next=4,J(this.props.path||"/g/evstore_test_ss_lineage",null,{groupBy:"type"});case 4:t=e.sent.body,t=this.cg2cy(t),t=this.annotate(t),this.setData(t),this.setHandlers(),a=this.getSun(),a.scratch("switchboard").planets=!0,this.setElements();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSun",value:function(){return this.datacy.$('node[obj-class = "stars"]')[0]}},{key:"configurePlugins",value:function(){var e=this;this.eh=this.cy.edgehandles({preview:!0,hoverDelay:150,handleNodes:"node",snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!1,disableBrowserGestures:!0,handlePosition:function(e){return"middle top"},handleInDrawMode:!1,edgeType:function(e,t){return"flat"},loopAllowed:function(e){return!0},nodeLoopOffset:-50,nodeParams:function(e,t){return{}},edgeParams:function(e,t,a){return{}},ghostEdgeParams:function(){return{}},show:function(e){},hide:function(e){},start:function(e){},complete:function(e,t,a){},stop:function(e){},cancel:function(e,t){},hoverover:function(e,t){},hoverout:function(e,t){},previewon:function(e,t,a){},previewoff:function(e,t,a){},drawon:function(){},drawoff:function(){}}),[{menuRadius:80,selector:"*",commands:this.buildMenu.bind(this),fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:10,indicatorSize:24,separatorWidth:3,spotlightPadding:4,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:!1},{selector:"core",commands:[{content:"bg1",select:function(){console.log("bg1")}},{content:"bg2",select:function(){console.log("bg2")}}],openMenuEvents:"cxttapstart taphold"}].forEach((function(t){return e.cy.cxtmenu(t)}))}},{key:"draw",value:function(){this.cy.layout({name:"breadthfirst",fit:!0,directed:!0,padding:30,circle:!0,grid:!1,spacingFactor:1.75,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,maximal:!0,transform:function(e,t){return t}}).run()}},{key:"getChildren",value:function(e,t){console.log({node:e,objClass:t});var a=this.datacy.$id(e.id()).outgoers();return t?a.filter((function(e){return e.isNode()?e.data()["obj-class"]===t:e.target().data()["obj-class"]===t})):a}},{key:"getDataNode",value:function(e){return this.datacy.$id(e.id())}},{key:"revealChildren",value:function(e,t){this.getDataNode(e).scratch("switchboard")[t]=!0,this.setElements()}},{key:"hideChildren",value:function(e,t){this.getDataNode(e).scratch("switchboard")[t]=!1,this.setElements()}},{key:"buildMenu",value:function(e){var t=this,a=this.getDataNode(e),n=[],o=document.createElement("span");c.a.render(r.a.createElement(I.a,null),o),n.push({fillColor:"rgba(200, 200, 200, 0.75)",content:o.outerHTML,contentStyle:{},select:function(e){console.log(e.data())},enabled:!0});var l=a.scratch("switchboard"),s=function(e){var a=e.charAt(0).toUpperCase();if(l[e]){var o=document.createElement("span");c.a.render(r.a.createElement("span",null,r.a.createElement(R.a,null)," ",a),o),n.push({fillColor:"rgba(0, 200, 200, 0.75)",content:o.outerHTML,select:function(a){return t.hideChildren(a,e)}})}else{var s=document.createElement("span");c.a.render(r.a.createElement("span",null,r.a.createElement($.a,null)," ",a),s),n.push({fillColor:"rgba(200, 200, 0, 0.75)",content:s.outerHTML,select:function(a){return t.revealChildren(a,e)}})}};for(var i in l)s(i);return n}},{key:"buildSwitchBoard",value:function(e){var t=e.outgoers().filter((function(e){return e.isNode()})).reduce((function(e,t){return e.add(t.data()["obj-class"]),e}),new Set),a={},n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){a[c.value]=!1}}catch(s){r=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}e.scratch("switchboard",a)}},{key:"setElements",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e=e||this.getSun(),a.push(e);var n=e.scratch("switchboard");for(var r in n)if(n[r]){var o=this.getChildren(e,r);o.forEach((function(e){a.push(e),e.isNode()&&t.setElements(e,a)}))}arguments.length||this.setState({elements:a.map((function(e){return e.json()}))})}},{key:"setData",value:function(e){var t=this,a=this.datacy;a.elements().remove(),a.add(e),a.$("*").addClass("data"),a.$("node").forEach((function(e){return t.buildSwitchBoard(e)}))}},{key:"setHandlers",value:function(){var e=this.cy;e.on("tapdragover select","edge",(function(e){e.target.style({width:4,"line-color":"#007bff","target-arrow-color":"#007bff"})})),e.on("tapdragout unselect","edge",(function(e){var t=e.target;t.selected()||t.style({width:2,"line-color":"#ccc","target-arrow-color":"#ccc"})})),e.on("tapdragover select","node.data",(function(e){var t=e.target,a=t.scratch("style")||{};a["background-color"]||(a["background-color"]=t.style("background-color"),t.scratch("style",a)),t.style({"background-color":"#007bff"})})),e.on("tapdragout unselect","node.data",(function(e){var t=e.target;if(!t.selected()){t.style({"background-color":t.scratch("style")["background-color"]});var a=t.scratch("style")||{};a["background-color"]=!1,t.scratch("style",a)}}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E.a,{className:"my-1"},r.a.createElement(k.a,null,r.a.createElement(H.a,{color:"danger"},r.a.createElement(z.a,{size:16})," Reset"),"\xa0",r.a.createElement(H.a,{color:"primary"},r.a.createElement(F.a,{size:16})," Redraw"))),r.a.createElement(E.a,null,r.a.createElement(k.a,null,r.a.createElement("div",{className:"border border-secondary rounded w-100",id:"cy-container"},r.a.createElement("div",{className:"m-1",id:"cy"},r.a.createElement(T.a,{cy:function(t){e.cy=t},style:{width:"100%",height:"100%"},stylesheet:A,layout:{name:"breadthfirst",fit:!1,directed:!0,padding:30,circle:!1,grid:!1,spacingFactor:1.75,avoidOverlap:!0,nodeDimensionsIncludeLabels:!0,maximal:!0,transform:function(e,t){return t}},elements:this.state.elements}))))))}},{key:"cg2cy",value:function(e){var t={vertex:"nodes",edge:"edges"},a={_id:"id",_from:"source",_to:"target"},n={},r=!0,o=!1,c=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var i=l.value,d=t[i.type];n[d]=[];var u=!0,h=!1,f=void 0;try{for(var g,m=i.nodes[Symbol.iterator]();!(u=(g=m.next()).done);u=!0){var y=g.value,v={};for(var p in y)v[a[p]||p]=y[p];n[d].push({data:v})}}catch(b){h=!0,f=b}finally{try{u||null==m.return||m.return()}finally{if(h)throw f}}}}catch(b){o=!0,c=b}finally{try{r||null==s.return||s.return()}finally{if(o)throw c}}return n}},{key:"annotate",value:function(e){return e.nodes.forEach((function(e){return e.data["obj-class"]=e.data.id.match(/evstore_test_(.*)\/.*/)[1]})),e}}]),t}(r.a.Component),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).toggle=a.toggle.bind(Object(u.a)(a)),a.state={isOpen:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement(f.a,{fluid:!0},r.a.createElement(g.a,{color:"inverse",light:!0,expand:"md",className:"border-bottom mb-2"},r.a.createElement(m.a,{href:"/"},"CivicGraph Demo - A DIY Solar System"),r.a.createElement(y.a,{onClick:this.toggle}),r.a.createElement(v.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(p.a,{className:"ml-auto",navbar:!0},r.a.createElement(b.a,null,r.a.createElement(w.a,{href:"/components/"},"Components")),r.a.createElement(b.a,null,r.a.createElement(w.a,{href:"https://github.com/reactstrap/reactstrap"},"Github"))))),r.a.createElement(f.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,null,r.a.createElement(G,null)))))}}]),t}(n.Component);a(58),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.1aa8c711.chunk.js.map